<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.14.5/react.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.14.5/react-dom.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.23/browser.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/0.3.2/marked.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.5/js/materialize.min.js"></script>
    <link rel='stylesheet' href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.5/css/materialize.min.css" />
  </head>
  <body>
    <div id='content' class='container'></div>
    <script type="text/babel">
      class List extends React.Component{
        constructor(props){
          super(props);
          this.state = { items: [], complete: 0, nextID: 0 }
          this.items = this.items.bind(this);
          this.addItem = this.addItem.bind(this);
        }
        items(){
          let items = [];
          this.state.items.map( item => {
            items.push(<Item key={`item-${item.id}`} name={item.name} complete={item.complete} id={item.id} />);
          });
          return items;
        }
        nextID(id){
          return id += 1;
        }
        addItem(e){
          e.preventDefault();
          let items = this.state.items;
          items.unshift({ name: this.refs.name.value, complete: false, id: this.state.nextID});
          this.refs.name.value = null;
          this.setState({ items: items, nextID: this.nextID(this.state.nextID) });
        }
        render(){
          return( <div className='center container'>
                    <h1> To Do </h1>
                    <form onSubmit={this.addItem}>
                      <input placeholder='add item' type='text' ref='name' />
                    </form>
                    <hr />
                    <div className='row'>
                    {this.items()}
                    </div>
                  </div>);
        }
      }

      class Item extends React.Component{
        constructor(props){
          super(props);
        }
        render(){
          let id = `complete-${this.props.id}`;
          return( <div className='col s12'>
                    <div className='col m8'>
                      {this.props.name}
                    </div>
                    <div className='col m3'>
                      <input type='checkbox' id={id} defaultChecked={this.props.checked} />
                      <label htmlFor={id}>Complete?</label>
                    </div>
                    <div className='col m1'>
                      X
                    </div>
                  </div>)
        }
      }

      ReactDOM.render(<List />, document.getElementById('content'));
    </script>
  </body>
</html>